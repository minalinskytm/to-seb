<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valentine's Confession</title>

  <!-- Journal-style font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600&display=swap" rel="stylesheet">

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js" defer></script>

  <style>
    body {
      font-family: 'Caveat', cursive;
      background: linear-gradient(135deg, #ffb3c6, #ffe5ec);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
      padding: 20px;
    }
    .card {
      background: white;
      padding: 35px;
      border-radius: 20px;
      text-align: center;
      max-width: 650px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }
    h1 {
      color: #e63946;
      margin-bottom: 20px;
      font-size: 36px;
    }
    .letter {
      font-size: 15px;
      line-height: 1.9;
      color: #333;
      text-align: left;
      margin-bottom: 30px;
      white-space: pre-line;
    }
    .question {
      font-size: 20px;
      font-weight: bold;
      color: #e63946;
      margin-bottom: 20px;
    }
    button {
      font-size: 18px;
      padding: 10px 25px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      margin: 8px;
    }
    .yes { background-color: #ff4d6d; color: white; }
    .maybe { background-color: #ffb703; color: white; }
    .no { background-color: #adb5bd; color: white; }

    #response {
      margin-top: 25px;
      font-size: 20px;
      font-weight: bold;
      color: #e63946;
      min-height: 1.5em;
    }

    .signature {
      display: none;
      margin-top: 20px;
      font-family: 'Brush Script MT', 'Segoe Script', cursive;
      font-size: 22px;
      color: #e63946;
    }

    .fade-in {
      animation: fadeIn 0.8s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>To Seb ðŸ’Œ</h1>

    <div class="letter fade-in">
Dear Seb,

Sa two-weeks na pag-uusap na'tin 
Ay minahal na kita, at alam mo yun
You have the wits, and you're very kind.
That's why i still love you the same, even now.
Sa mga saglit na 'yon, Di mo pinadama 
sa akin na iba ako
Tinanggap mo ko ng buo
Sa warmth mo, it felt like home, 
kaya siguro nadepende ako sa'yo 
Sobrang nagsisisi pa rin ako sa gabing 'yun.
I won't force myself, i will respect your boundaries.
I just want you to know, how important you've been sa buhay ko
Sana bigyan mo ko ng pagkakataon to fix things,
And i hope you give me a chance to be with you again.
Di ko sasayingin mabibigay mo sa'ken na chance, Seb.
Hindi kita bibigyan ng pressure dito.
I just hope you'll be open with the idea.
Hindi ako mapapagod, at di ako magsasawa na intindihin ka. 
Maging honest ka lang sa'ken.
I don't want to lose you in my life.
Please...

<span class="signature">â€” From Revi</span>
    </div>

    <div class="question">Is it okay ba for you to be a part of my Valentine?</div>

    <button class="yes" onclick="respond('yes')">Yes</button>
    <button class="maybe" onclick="respond('maybe')">Maybe</button>
    <button class="no" onclick="respond('no')">No</button>

    <div id="response"></div>
  </div>

  <script>
    // CONFIGURATION
    const EMAILJS_PUBLIC_KEY = 'h4w0Dw31TxrJDB-0e';
    const EMAILJS_SERVICE_ID = 'service_09s7zhu'; // â† REQUIRED: put your real service ID here
    const EMAILJS_TEMPLATE_ID = 'template_6786d8w';

    document.addEventListener('DOMContentLoaded', () => {
      if (window.emailjs) {
        emailjs.init(EMAILJS_PUBLIC_KEY);
      }
    });

    function respond(answer) {
      const responseEl = document.getElementById('response');
      const signature = document.querySelector('.signature');

      if (localStorage.getItem('emailSent') === 'true') return;

      localStorage.setItem('valentineAnswer', answer);

      const messages = {
        yes: "i'm glad that you accept my delight. i won't miss this chance, i promise you. <33",
        maybe: "don't worry, it's okay. i have no intention to pressure you anyway. thanks for giving this a time. ;))",
        no: "that's okay, atleast you try to find time to this. it hurts, but i'll be happy to whatever you chose. :))"
      };

      responseEl.innerText = messages[answer] || '';
      signature.style.display = 'block';
      signature.classList.add('fade-in');

      // SAFETY CHECK: prevent EmailJS crash if service ID is missing
      if (!EMAILJS_SERVICE_ID) {
        console.warn('EmailJS service ID is missing. Email not sent.');
        return;
      }

      emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
        to_email: 'delacruzrevi@gmail.com',
        answer: answer
      }).then(() => {
        localStorage.setItem('emailSent', 'true');
      }).catch(err => {
        console.error('EmailJS error:', err);
      });
    }
  </script>
</body>
</html>
